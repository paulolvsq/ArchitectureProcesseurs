
;  ### -------------------------------------------------------------- ###
;  # file	: strcpy_m.u						#
;  # date	: Sep  8 2009						#
;  # descr.	: functional test for Mips R3000			#
;  ### -------------------------------------------------------------- ###

	;  ### ------------------------------------------------------ ###
	;  #   data section						#
	;  ### ------------------------------------------------------ ###

			.data

source_str :		.asciiz	"Have a nice day"
target_str :		.space	128

	;  ### ------------------------------------------------------ ###
	;  #   text section						#
	;  #     - noreorder						#
	;  ### ------------------------------------------------------ ###

			.text
			.set	noreorder

	;  ### ------------------------------------------------------ ###
	;  #   make the label _main visible for other files		#
	;  ### ------------------------------------------------------ ###

			.globl	_main

	;  ### ------------------------------------------------------ ###
	;  #   main							#
	;  ### ------------------------------------------------------ ###

_main :

			la	r16, source_str
			la	r17, target_str

	;  ### ------------------------------------------------------ ###
	;  #   print the source string					#
	;  ### ------------------------------------------------------ ###

			add	r4 , r0 , r16
			jal	_puts

	;  ### ------------------------------------------------------ ###
	;  #   call strcpy						#
	;  ### ------------------------------------------------------ ###

			add	r4 , r0 , r17
			add	r5 , r0 , r16
			jal	_strcpy

	;  ### ------------------------------------------------------ ###
	;  #   print the target string					#
	;  ### ------------------------------------------------------ ###

			add	r4 , r0 , r17
			jal	_puts

	;  ### ------------------------------------------------------ ###
	;  #   exit							#
	;  ### ------------------------------------------------------ ###

			addi	r4 , r0 , 0		; exit value
			jal	_exit

			.end
